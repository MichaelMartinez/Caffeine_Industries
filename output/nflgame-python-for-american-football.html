<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8"> 
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Michael" />
        <meta name="copyright" content="Michael" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="iPython, NFL, Analysis, Python, " />

<meta property="og:title" content="NFLGame - Python for American Football "/>
<meta property="og:url" content="/nflgame-python-for-american-football.html" />
<meta property="og:description" content="NFLgame is a Python package that allows programmatic access to NFL data. It is a super fun way to get stats about your favorite NFL player or team. My plan is more sinister as I attempt to leverage this in my quest to win a fantasy football league. The Github ..." />
<meta property="og:site_name" content="Caffeine Industries" />
<meta property="og:article:author" content="Michael" />
<meta property="og:article:published_time" content="2013-03-14T23:37:00-07:00" />
<meta name="twitter:title" content="NFLGame - Python for American Football ">
<meta name="twitter:description" content="NFLgame is a Python package that allows programmatic access to NFL data. It is a super fun way to get stats about your favorite NFL player or team. My plan is more sinister as I attempt to leverage this in my quest to win a fantasy football league. The Github ...">

        <title>NFLGame - Python for American Football  Â· Caffeine Industries
</title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="/theme/css/pygments.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/theme/tipuesearch/tipuesearch.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/theme/css/elegant.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/theme/css/custom.css" media="screen">
    </head>
    <body>
        <div id="content-sans-footer">
        <div class="navbar navbar-static-top">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="/"><span class=site-name>Caffeine Industries</span></a>
                    <div class="nav-collapse collapse">
                        <ul class="nav pull-right top-menu">
                            <li ><a href="">Home</a></li>
                            <li ><a href="/categories.html">Categories</a></li>
                            <li ><a href="/tags.html">Tags</a></li>
                            <li ><a href="/archives.html">Archives</a></li>
                            <li><form class="navbar-search" action="/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span1"></div>
                <div class="span10">
<article>
<div class="row-fluid">
    <header class="page-header span10 offset2">
    <h1><a href="/nflgame-python-for-american-football.html"> NFLGame - Python for American Football  </a></h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">

            
            <p>NFLgame is a Python package that allows programmatic access to NFL
data.<br />
It is a super fun way to get stats about your favorite NFL player or
team.<br />
My plan is more sinister as I attempt to leverage this in my quest to
win a<br />
fantasy football league.</p>
<p>The Github repo is located
<a href="https://github.com/BurntSushi/nflgame">here</a>.</p>
<p><a href="/static/ipynb/NFL.ipynb"> Download this Notebook</a></p>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">nflgame</span>
</pre></div>


<h3>Lets have a look at some basic stats for the last 3 games of the NFL Regular season</h3>
<p>First we'll have a look at the top 25 rushers for weeks 15, 16, 17.
Awesome that we get<br />
summary stats right out of the box, right?</p>
<div class="highlight"><pre><span class="n">games</span> <span class="o">=</span> <span class="n">nflgame</span><span class="o">.</span><span class="n">games</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="n">week</span><span class="o">=</span><span class="p">[</span><span class="mi">15</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">17</span><span class="p">])</span>
<span class="n">players</span> <span class="o">=</span> <span class="n">nflgame</span><span class="o">.</span><span class="n">combine</span><span class="p">(</span><span class="n">games</span><span class="p">)</span>
<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">players</span><span class="o">.</span><span class="n">rushing</span><span class="p">()</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s">&quot;rushing_yds&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">limit</span><span class="p">(</span><span class="mi">25</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">p</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">rushing_yds</span>
</pre></div>


<p>A.Peterson 497<br />
A.Morris 378<br />
M.Lynch 324<br />
D.Williams 322<br />
C.Spiller 300<br />
J.Charles 289<br />
A.Foster 276<br />
M.Forte 260<br />
V.Ballard 252<br />
K.Moreno 240<br />
B.Pierce 232<br />
D.Martin 220<br />
S.Jackson 206<br />
C.Johnson 206<br />
D.McFadden 200<br />
D.Murray 197<br />
R.Bush 195<br />
M.Ingram 182<br />
S.Ridley 181<br />
S.Greene 180<br />
R.Wilson 179<br />
F.Gore 179<br />
M.Leshoure 158<br />
R.Rice 150<br />
D.Wilson 147</p>
<p>Next, we'll look at the top 25 running backs and the total amount of
touchdowns<br />
for weeks 15, 16, 17 using the players variable we created above.</p>
<div class="highlight"><pre><span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">players</span><span class="o">.</span><span class="n">touchdowns</span><span class="p">()</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s">&quot;rushing_tds&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">limit</span><span class="p">(</span><span class="mi">25</span><span class="p">):</span>
        <span class="k">print</span> <span class="n">p</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">rushing_tds</span>
</pre></div>


<p>A.Morris 6<br />
M.Tolbert 5<br />
R.Wilson 4<br />
C.Wells 3<br />
M.Forte 2<br />
R.Grant 2<br />
M.Turner 2<br />
M.Ingram 2<br />
A.Peterson 2<br />
T.Richardson 2<br />
K.Moreno 2<br />
J.Hester 2<br />
M.Leshoure 2<br />
D.Williams 2<br />
M.Lynch 2<br />
S.Ridley 2<br />
D.Woodhead 2<br />
C.Johnson 2<br />
S.Greene 2<br />
D.Lewis 1<br />
A.Dalton 1<br />
B.Green-Ellis 1<br />
A.Rodgers 1<br />
D.Harris 1<br />
D.Wilson 1</p>
<p>Fumbles are bad in fantasy football, umkay. Lets see the top 25 fumblers
for the<br />
same weeks...</p>
<div class="highlight"><pre><span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">players</span><span class="o">.</span><span class="n">fumbles</span><span class="p">()</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s">&quot;fumbles_tot&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">limit</span><span class="p">(</span><span class="mi">25</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">p</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">fumbles_tot</span>
</pre></div>


<p>P.Rivers 4<br />
C.Kaepernick 4<br />
R.Tannehill 3<br />
M.Sanchez 3<br />
N.Foles 2<br />
A.Dalton 2<br />
J.Cutler 2<br />
M.Colston 2<br />
J.Freeman 2<br />
D.Amendola 2<br />
C.Ponder 2<br />
C.Henne 2<br />
T.Holliday 2<br />
M.Stafford 2<br />
R.Fitzpatrick 2<br />
D.Murray 2<br />
A.Brown 2<br />
D.Moore 2<br />
J.McKnight 2<br />
T.Yates 2<br />
C.Harbor 1<br />
J.Maclin 1<br />
C.Thornton 1<br />
A.Green 1<br />
M.Forte 1</p>
<h3>Now lets have a go with a basic 'player on player' comparison and see if we can dig up any help from the past</h3>
<p>In my first week of the 2012 Fantasy Football season I had the RB match
up<br />
between Marshawn Lynch and Frank Gore. My team started M. "Beast Mode"
Lynch and<br />
I came up a bit short... could the outcome have been different with
some<br />
analysis? I had other RB's on the bench.</p>
<p>M. Lynch, player ID: 00-0025399</p>
<p>F. Gore, player ID: 00-0023500</p>
<p>The player can be looked up by name or player ID. Iterate through the
list of<br />
player in for loop and print p.playerid or print p.name ...
or just look<br />
in
<a href="https://github.com/BurntSushi/nflgame/blob/master/nflgame/players.json">players.json</a><br />
and use control-f , then start typing a players name to find<br />
all the available fields for each player.</p>
<div class="highlight"><pre> :::python
 week1 = nflgame.games(2012, week=1)
    players = nflgame.combine(week1)
    for p in players.rushing().sort(&quot;rushing_yds&quot;).limit(25):
        if p.playerid == &quot;00-0025399&quot; or p.playerid == &quot;00-0023500&quot;:
            print &quot;--------&quot;
            print p.player, p.formatted_stats()

    print &quot;-------&quot;
</pre></div>


<hr />
<p>Frank Gore (RB, SF) rushing_lngtd: 23, rushing_tds: 1,
rushing_twopta: 0,<br />
rushing_lng: 23, rushing_yds: 112, rushing_att: 16, rushing_twoptm:
0,<br />
receiving_tds: 0, receiving_lng: 1, receiving_rec: 1,
receiving_twopta: 0,<br />
receiving_yds: 1, receiving_lngtd: 0, receiving_twoptm: 0  </p>
<hr />
<p>Marshawn Lynch (RB, SEA) rushing_lngtd: 0, rushing_tds: 0,
rushing_twopta:<br />
0, rushing_lng: 11, rushing_yds: 85, rushing_att: 21,
rushing_twoptm: 0,<br />
receiving_tds: 0, receiving_lng: 7, receiving_rec: 2,
receiving_twopta: 0,<br />
receiving_yds: 12, receiving_lngtd: 0, receiving_twoptm: 0,
fumbles_trcv: 0,<br />
fumbles_tot: 1, fumbles_rcv: 0, fumbles_yds: 0, fumbles_lost: 0  </p>
<hr />
<h3>Lets have a look at three, first game, match-ups between the 49'ers and the Seahawks.</h3>
<div class="highlight"><pre> :::python
 game12 = nflgame.one(2012, 7, &quot;SF&quot;, &quot;SEA&quot;)
    print game12.nice_score()
    print &#39;*****&#39;
    print &quot;2012 Away team: %s&quot; % (game12.away)
    # convert the named tuple to dict and iterate with items
    for i, v in game12.stats_away._asdict().items():
        print i, v
    print &#39;-------&#39;
    print &quot;2012 Home team: %s&quot; %game11.home
    # convert the named tuple to dict and iterate with items
    for i, v in game11.stats_home._asdict().items():
        print i, v

    print &#39;-------&#39;
</pre></div>


<p>SF (13) vs. SEA (6)<br />
*****<br />
2012 Away team: SEA<br />
first_downs 13<br />
total_yds 251<br />
passing_yds 115<br />
rushing_yds 136<br />
penalty_cnt 3<br />
penalty_yds 20<br />
turnovers 1<br />
punt_cnt 4<br />
punt_yds 194<br />
punt_avg 31<br />
pos_time 27:59  </p>
<hr />
<p>2012 Home team: SF<br />
first_downs 12<br />
total_yds 209<br />
passing_yds 124<br />
rushing_yds 85<br />
penalty_cnt 9<br />
penalty_yds 102<br />
turnovers 0<br />
punt_cnt 5<br />
punt_yds 298<br />
punt_avg 54<br />
pos_time 31:07  </p>
<hr />
<div class="highlight"><pre><span class="n">game11</span> <span class="o">=</span> <span class="n">nflgame</span><span class="o">.</span><span class="n">one</span><span class="p">(</span><span class="mi">2011</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&quot;SF&quot;</span><span class="p">,</span> <span class="s">&quot;SEA&quot;</span><span class="p">)</span>
    <span class="k">print</span> <span class="n">game11</span><span class="o">.</span><span class="n">nice_score</span><span class="p">()</span>
    <span class="k">print</span> <span class="s">&#39;*****&#39;</span>
    <span class="k">print</span> <span class="s">&quot;2011 Away team: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">game11</span><span class="o">.</span><span class="n">away</span><span class="p">)</span>
    <span class="c"># convert the named tuple to dict and iterate with items</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">game11</span><span class="o">.</span><span class="n">stats_away</span><span class="o">.</span><span class="n">_asdict</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">print</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span>
    <span class="k">print</span> <span class="s">&#39;-------&#39;</span>
    <span class="k">print</span> <span class="s">&quot;2011 Home team: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span><span class="n">game11</span><span class="o">.</span><span class="n">home</span>
    <span class="c"># convert the named tuple to dict and iterate with items</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">game11</span><span class="o">.</span><span class="n">stats_home</span><span class="o">.</span><span class="n">_asdict</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">print</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span>

    <span class="k">print</span> <span class="s">&#39;-------&#39;</span>
    <span class="n">week_11</span> <span class="o">=</span> <span class="n">nflgame</span><span class="o">.</span><span class="n">games</span><span class="p">(</span><span class="mi">2011</span><span class="p">,</span> <span class="n">week</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">players</span> <span class="o">=</span> <span class="n">nflgame</span><span class="o">.</span><span class="n">combine</span><span class="p">(</span><span class="n">week_11</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">players</span><span class="o">.</span><span class="n">rushing</span><span class="p">()</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s">&quot;rushing_yds&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">limit</span><span class="p">(</span><span class="mi">25</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">playerid</span> <span class="o">==</span> <span class="s">&quot;00-0025399&quot;</span> <span class="ow">or</span> <span class="n">p</span><span class="o">.</span><span class="n">playerid</span> <span class="o">==</span> <span class="s">&quot;00-0023500&quot;</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&quot;--------&quot;</span>
            <span class="k">print</span> <span class="n">p</span><span class="o">.</span><span class="n">player</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">formatted_stats</span><span class="p">()</span>

    <span class="k">print</span> <span class="s">&quot;-------&quot;</span>
</pre></div>


<p>SF (33) vs. SEA (17)<br />
*****<br />
2011 Away team: SEA<br />
first_downs 18<br />
total_yds 219<br />
passing_yds 155<br />
rushing_yds 64<br />
penalty_cnt 11<br />
penalty_yds 72<br />
turnovers 3<br />
punt_cnt 7<br />
punt_yds 342<br />
punt_avg 33<br />
pos_time 28:53  </p>
<hr />
<p>2011 Home team: SF<br />
first_downs 12<br />
total_yds 209<br />
passing_yds 124<br />
rushing_yds 85<br />
penalty_cnt 9<br />
penalty_yds 102<br />
turnovers 0<br />
punt_cnt 5<br />
punt_yds 298<br />
punt_avg 54<br />
pos_time 31:07  </p>
<hr />
<hr />
<p>Frank Gore (RB, SF) rushing_lngtd: 0, rushing_tds: 0,
rushing_twopta: 0,<br />
rushing_lng: 16, rushing_yds: 59, rushing_att: 22, rushing_twoptm:
0,<br />
receiving_tds: 0, receiving_lng: 12, receiving_rec: 3,
receiving_twopta: 0,<br />
receiving_yds: 19, receiving_lngtd: 0, receiving_twoptm: 0  </p>
<hr />
<div class="highlight"><pre> :::python
 game10 = nflgame.one(2010, 1, &quot;SEA&quot;, &quot;SF&quot;)
    print game10.nice_score()
    print &#39;*****&#39;
    print &quot;2010 Away team: %s&quot; % (game10.away)
    # convert the named tuple to dict and iterate with items
    for i, v in game10.stats_away._asdict().items():
        print i, v
    print &#39;-------&#39;
    print &quot;2010 Home team: %s&quot; %game10.home
    # convert the named tuple to dict and iterate with items
    for i, v in game10.stats_home._asdict().items():
        print i, v

    print &#39;-------&#39;
    week_10 = nflgame.games(2010, week=1)
    players = nflgame.combine(week_10)
    for p in players.rushing().sort(&quot;rushing_yds&quot;).limit(25):
        if p.playerid == &quot;00-0025399&quot; or p.playerid == &quot;00-0023500&quot;:
            print &quot;--------&quot;
            print p.player, p.formatted_stats()

    print &quot;-------&quot;
</pre></div>


<p>SEA (31) vs. SF (6)<br />
*****<br />
2010 Away team: SF<br />
first_downs 14<br />
total_yds 263<br />
passing_yds 214<br />
rushing_yds 49<br />
penalty_cnt 8<br />
penalty_yds 60<br />
turnovers 2<br />
punt_cnt 6<br />
punt_yds 249<br />
punt_avg 35<br />
pos_time 32:45  </p>
<hr />
<p>2010 Home team: SEA<br />
first_downs 14<br />
total_yds 242<br />
passing_yds 165<br />
rushing_yds 77<br />
penalty_cnt 5<br />
penalty_yds 35<br />
turnovers 1<br />
punt_cnt 5<br />
punt_yds 207<br />
punt_avg 36<br />
pos_time 27:15  </p>
<hr />
<hr />
<p>*******</p>
<h3>Conclusion</h3>
<p>So we took a look at the team stats for the last three, first game,
match-ups<br />
to see if we could uncover any actionable information. We see that
Frank Gore<br />
played in 2011 but not in 2010. Marshawn Lynch did not play in 2011 nor
in 2010. Not<br />
much to go on there...</p>
<p>Rushing yards were low in the first two games, which may have suggested
that the<br />
third game would have been similar. However, the 2012 match-up had both
teams with over 100 yards<br />
rushing which may or may not be an outlier. Now to be thorough, I
should compare the<br />
running backs I had on the bench in a similar manner. Then, ultimately,
make a reasonable guess.</p>
<p>Not all is lost in this simple analysis, I learned a bit about tuples in
the<br />
process. I can also say that I am learning while playing which is
'win-win.' Perhaps the<br />
trophy on my mantle is a bit pre-mature at this point, as I really need
to learn statistics<br />
(stay tuned for more on that front).</p>
<p>Here is a neat little tidbit about Named tuples that I learned during
this.<br />
The team stats are created in game.py and are delivered as a
`namedtuple()`.<br />
The `._asdict()` method on Named Tuples will return an ordered<br />
dict as described
<a href="http://docs.python.org/release/2.7.4/library/collection%20s.html#collections.somenamedtuple._asdict">here</a>.
Once you have a dict, simply use<br />
(chain on) the `.items()` method to iterate over the key and value.
If you want<br />
the keys or values by themselves, use the `.keys()` or `.values()`
methods<br />
respectively.</p>
<p>I plan on using this extensively next season. In preparation, I have
been<br />
learning statistics and the Pandas data analysis python library.</p>
<p>Note: Everything I work on in this space is using iPython Notebook and
will<br />
be published for you to run as well...</p>
            
            
            <hr/>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
            <h4>Published</h4>
            <time pubdate="pubdate" datetime="2013-03-14T23:37:00-07:00">Mar 14, 2013</time>
            <h4>Category</h4>
            <a class="category-link" href="/categories.html#python-ref">Python</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="/tags.html#analysis-ref">Analysis
                    <span>1</span>
</a></li>
                <li><a href="/tags.html#ipython-ref">iPython
                    <span>3</span>
</a></li>
                <li><a href="/tags.html#nfl-ref">NFL
                    <span>1</span>
</a></li>
            </ul>
<h4>Contact</h4>
    <a href="#" title="My You can add links in your config file Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-you can add links in your config file sidebar-social-links"></i></a>
    <a href="#" title="My Another social link Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-another social link sidebar-social-links"></i></a>
        </div>
        </section>
</div>
</article>
                </div>
                <div class="span1"></div>
            </div>
        </div>
        <div id="push"></div>
    </div>
<footer>
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-power">Powered by <a href="http://getpelican.com/" title="Pelican Home Page">Pelican</a>. Theme: <a href="http://oncrashreboot.com/pelican-elegant" title="Theme Elegant Home Page">Elegant</a> by <a href="http://oncrashreboot.com" title="Talha Mansoor Home Page">Talha Mansoor</a></li>
    </ul>
</div>
</footer>            <script src="http://code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    
    </body>
    <!-- Theme: Elegant built for Pelican
    License : http://oncrashreboot.com/pelican-elegant -->
</html>