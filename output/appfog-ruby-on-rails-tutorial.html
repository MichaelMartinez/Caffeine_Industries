<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8"> 
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Michael" />
        <meta name="copyright" content="Michael" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="tutorial, demo, Ruby, " />

<meta property="og:title" content="AppFog - Ruby on Rails 3.2 Tutorial "/>
<meta property="og:url" content="/appfog-ruby-on-rails-tutorial.html" />
<meta property="og:description" content="AppFog is an incredible service in the land of PaaS or Platform as a Service. They are a Cloud Foundry-powered polyglot platform. You can sign up for beta access now and start pushing apps strait away. Their web based management interface is really nice, and I am a sucker ..." />
<meta property="og:site_name" content="Caffeine Industries" />
<meta property="og:article:author" content="Michael" />
<meta property="og:article:published_time" content="2012-06-27T23:08:00-07:00" />
<meta name="twitter:title" content="AppFog - Ruby on Rails 3.2 Tutorial ">
<meta name="twitter:description" content="AppFog is an incredible service in the land of PaaS or Platform as a Service. They are a Cloud Foundry-powered polyglot platform. You can sign up for beta access now and start pushing apps strait away. Their web based management interface is really nice, and I am a sucker ...">

        <title>AppFog - Ruby on Rails 3.2 Tutorial  · Caffeine Industries
</title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="/theme/css/pygments.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/theme/tipuesearch/tipuesearch.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/theme/css/elegant.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/theme/css/custom.css" media="screen">
    </head>
    <body>
        <div id="content-sans-footer">
        <div class="navbar navbar-static-top">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="/"><span class=site-name>Caffeine Industries</span></a>
                    <div class="nav-collapse collapse">
                        <ul class="nav pull-right top-menu">
                            <li ><a href="">Home</a></li>
                            <li ><a href="/categories.html">Categories</a></li>
                            <li ><a href="/tags.html">Tags</a></li>
                            <li ><a href="/archives.html">Archives</a></li>
                            <li><form class="navbar-search" action="/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span1"></div>
                <div class="span10">
<article>
<div class="row-fluid">
    <header class="page-header span10 offset2">
    <h1><a href="/appfog-ruby-on-rails-tutorial.html"> AppFog - Ruby on Rails 3.2 Tutorial  </a></h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">

            
            <p><a href="http://www.appfog.com/">AppFog</a> is an incredible service in the land of
PaaS or Platform as a Service. They are a <a href="http://www.cloudfoundry.com/">Cloud
Foundry</a>-powered polyglot platform. You
can <a href="https://console.appfog.com/signup">sign up</a> for beta access now and
start pushing apps strait away. Their web based management interface is
really nice, and I am a sucker for nicely designed "things."  In this
post I'd like to show you all how I got a Ruby on Rails app up and
running.</p>
<h2>Create</h2>
<p>A developer has two ways to create a new RoR app.</p>
<p>1. Use the AppFog console to bootstrap a shell RoR app. [<a href="https://github.com/appfog/af-ruby-rails">source
code</a>]</p>
<p>This will net a basic shell RoR app with Ruby version 1.9.3-p125 and
Rails version 3.2.5</p>
<p>2. Use the <strong>af</strong> gem to push your locally developed app to the cloud.</p>
<h2>Push</h2>
<p>How do you push an app to AppFog?</p>
<p>Hopefully you are using rvm, rbenv or have some sort of Ruby/Gem
management system set-up. Rvm and rbenv are out of the scope of this
tutorial. I use rvm to create project-based gemsets with a directory
level .rvmrc file. You can read more about rvm <a href="https://rvm.io//">here</a>.</p>
<p>[gist id=3009318]</p>
<p>When you are ready to push issue this command:</p>
<p>[gist id=3009377]</p>
<p>If you don’t specify an app name, AppFog will use the directory name. I
found that my Ruby version wasn't automatically detected without the
runtime flag. I found this by looking through the af gem source code on
Github. (I love OSS!) The runtimes supported by AppFog can be found
using "af runtimes".</p>
<p>You will then be taken though a series of yes/no questions where the
details come into play. Accepting the default answer for all of these
questions with the exception of database technology is the simplest way
to get up and running. You can choose between Mongo and MySQL for the
database technology to use, so even that isn’t very complicated.</p>
<p>Let me be clear, I have not veered far from the quickest path to get my
app set-up. Subsequent tutorials will have more on this front.</p>
<h2>Running / Errors</h2>
<p>At this point you are either running or you have error(s). If you have
an error, use “af logs &lt;appname&gt;” to diagnose what went wrong. You
can also head to the <a href="http://support.appfog.com/forums">support forums</a>
or the <a href="https://groups.google.com/forum/?fromgroups#!forum/appfog-users">Google
group</a>
to ask a question or look through previous questions/discussions.</p>
<p>In either app creation case, you are going to use "af update
&lt;appname&gt;" once you have something you'd like show the world or
need to make a change. This command is strait forward; push the changes
to the cloud.</p>
<h2>Sum it up</h2>
<ol>
<li>create app either on AppFog or locally</li>
<li>install af gem</li>
<li>af push or af update</li>
<li>profit</li>
</ol>
<h3>Notes:</h3>
<p>When I looked at the available commands using "af  --help", it was not
immediately clear what each command was used for. A good option to learn
more is to read though the <a href="https://github.com/appfog/af">source</a>.  OR
you can wait for my next tutorial where I'll dive in with both feet on
every available command.</p>
<hr />
<h2>Database</h2>
<p>Using MySQL? You <strong><em>need</em></strong> the <strong><em>mysql2 gem</em></strong> in your gemfile. Also,
if you intend to develop your app against MySQL locally, you will want
your database.yml file to look like or similar to the gist below.</p>
<p>[gist id=3006959]</p>
<p>I am not sure why the database.yml needs to be set-up like this and
quite frankly it could be my error (system or set-up). The error
I received was database adapter not found and I have narrowed it down to
the application creation process. Once the app is up and running, I have
been able to use either configuration.</p>
<h3>Notes:</h3>
<p>Developing with MySQL locally will help to eliminate a potential source
of frustration not related to AppFog. A simple query that works with
sqlite3 may completely fail with PG or MySQL due to type casting, as
just one example. Databases like PostgreSQL and MySQL have more features
than sqlite3 but are more strict with type. So, you can avoid a lot of
potential problems by simply developing against the database you intend
to use in production.</p>
<hr />
<h2>Package</h2>
<p>You need to pre-package the app to the greatest extent possible.</p>
<p>[gist id=3009404]</p>
<p>Keep in mind that “bundler package” will add size, in some cases
significant size, to your app. This command caches a local version of
each gem to your vendor/cache dir and some gems are really large.</p>
<p>Potential problems with gems, bundler and AppFog; Lets say you need to
modify a published gem. Lets also posit that you fork and modify this
gem to fit your particular app (change color scheme, etc.). You can use
bundler's <a href="http://gembundler.com/git.html">git feature</a> to host this
modified gem on Github and it will behave as if it was hosted on
rubygems.org. This is great when working locally or you have access to
bundler and/or rake.</p>
<p>I've found that you may need to publish the modified gem to rubygems.org
for it to work properly in production. In fact I have not been able to
use un-published gems with AppFog. If your modification is a useful
feature the community may benefit from, consider submitting a pull
request through proper channels before going down this road.</p>
<h3>Sum it up</h3>
<p>In a nut shell... stick with published gems and you'll be A-OK.</p>
<hr />
<h2>Precompile</h2>
<p>Speaking of packaging and pre-deployment. If you are using rails 3 and
the asset pipeline you need to run this command before you push or
update.</p>
<p>[gist id=3007160]</p>
<hr />
<h2>Final Thoughts</h2>
<p>Whew! I hope this helps you navigate the AppFog PaaS. Stay tuned for
more and if you have questions don’t hesitate to ask… in the <a href="http://support.appfog.com/forums">support
forums</a> or the <a href="https://groups.google.com/forum/?fromgroups#!forum/appfog-users">Google
group</a>!
I am neither an AppFog or CloudFoundry expert nor an employee, I simply
believe in the Kool-Aid they are pushing.</p>
            
            
            <hr/>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
            <h4>Published</h4>
            <time pubdate="pubdate" datetime="2012-06-27T23:08:00-07:00">Jun 27, 2012</time>
            <h4>Category</h4>
            <a class="category-link" href="/categories.html#ruby-ref">Ruby</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="/tags.html#demo-ref">demo
                    <span>1</span>
</a></li>
                <li><a href="/tags.html#tutorial-ref">tutorial
                    <span>2</span>
</a></li>
            </ul>
<h4>Contact</h4>
    <a href="#" title="My You can add links in your config file Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-you can add links in your config file sidebar-social-links"></i></a>
    <a href="#" title="My Another social link Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-another social link sidebar-social-links"></i></a>
        </div>
        </section>
</div>
</article>
                </div>
                <div class="span1"></div>
            </div>
        </div>
        <div id="push"></div>
    </div>
<footer>
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-power">Powered by <a href="http://getpelican.com/" title="Pelican Home Page">Pelican</a>. Theme: <a href="http://oncrashreboot.com/pelican-elegant" title="Theme Elegant Home Page">Elegant</a> by <a href="http://oncrashreboot.com" title="Talha Mansoor Home Page">Talha Mansoor</a></li>
    </ul>
</div>
</footer>            <script src="http://code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    
    </body>
    <!-- Theme: Elegant built for Pelican
    License : http://oncrashreboot.com/pelican-elegant -->
</html>